"use strict";(self.webpackChunkreact_kabzda_1_js=self.webpackChunkreact_kabzda_1_js||[]).push([[815],{5815:function(t,s,e){e.r(s),e.d(s,{default:function(){return A}});var r=e(1413),n=e(5671),o=e(3144),i=e(136),u=e(516),a=e(2791),l=e(7781),p=e(7689),d=e(8687),c="ProfileInfo_descriptionBlock__XBXuJ",f="ProfileInfo_mainPhoto__QU8TO",h=e(8458),v=e(3253),j=e(885),x=e(184),m=function(t){var s=(0,a.useState)(!1),e=(0,j.Z)(s,2),r=e[0],n=e[1],o=(0,a.useState)(t.status),i=(0,j.Z)(o,2),u=i[0],l=i[1];(0,a.useEffect)((function(){l(t.status)}),[t.status]);return(0,x.jsxs)("div",{children:[!r&&(0,x.jsx)("div",{children:(0,x.jsx)("span",{onDoubleClick:function(){n(!0)},children:t.status||"-----"})}),r&&(0,x.jsx)("div",{children:(0,x.jsx)("input",{onChange:function(t){l(t.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),t.updateStatus(u)},value:u})})]})},P=function(t){var s=t.profile,e=t.status,r=t.updateStatus,n=t.isOwner,o=t.savePhoto;if(!s)return(0,x.jsx)(h.Z,{});return(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:c,children:[(0,x.jsx)("img",{src:null!=s.photos.large?s.photos.large:v,alt:"",className:f}),n&&(0,x.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&o(t.target.files[0])}}),(0,x.jsx)(m,{status:e,updateStatus:r})]})})},g=e(2982),_=e(6139),k=e(704),S="MyPosts_postsBlock__lB-pf",Z="MyPosts_posts__GSiZ2",w="Post_item__Yu4oG",C=function(t){return(0,x.jsxs)("div",{className:w,children:[(0,x.jsx)("img",{src:"https://cdn.wionews.com/sites/default/files/2018/09/12/20463-web%25252520default%25252520%2525283%252529-20170328074902.png",alt:""}),t.message,(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{children:"like"})," ",t.likesCount]})]})},b=e(5304),y=e(7307),I=(0,b.D)(10),N=(0,k.Z)({form:"profileAddNewPostForm"})((function(t){return(0,x.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,x.jsx)("div",{children:(0,x.jsx)(_.Z,{placeholder:"Post message",component:y.gx,name:"newPostText",validate:[b.C,I]})}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{children:"Add post"})})]})})),U=a.memo((function(t){var s=(0,g.Z)(t.posts).reverse().map((function(t){return(0,x.jsx)(C,{message:t.message,likesCount:t.likesCount},t.id)}));return(0,x.jsxs)("div",{className:S,children:[(0,x.jsx)("h3",{children:"My posts"}),(0,x.jsx)(N,{onSubmit:function(s){t.addPost(s.newPostText)}}),(0,x.jsx)("div",{className:Z,children:s})]})})),O=e(6070),B=(0,d.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(s){t((0,O.Wl)(s))}}}))(U),T=function(t){return(0,x.jsxs)("div",{children:[(0,x.jsx)(P,{savePhoto:t.savePhoto,isOwner:t.isOwner,profile:t.profile,status:t.status,updateStatus:t.updateStatus}),(0,x.jsx)(B,{})]})},z=(e(1548),function(t){(0,i.Z)(e,t);var s=(0,u.Z)(e);function e(){return(0,n.Z)(this,e),s.apply(this,arguments)}return(0,o.Z)(e,[{key:"refreshProfile",value:function(){var t=this.props.router.params.userId;t||(t=this.props.authorizedUserId),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s){this.props.router.params.userId!==t.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,x.jsx)("div",{children:(0,x.jsx)(T,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))})}}]),e}(a.Component));var A=(0,l.qC)((0,d.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:O.et,getStatus:O.lR,updateStatus:O.Nf,savePhoto:O.Ju}),(function(t){return function(s){var e=(0,p.TH)(),n=(0,p.s0)(),o=(0,p.UO)();return(0,x.jsx)(t,(0,r.Z)((0,r.Z)({},s),{},{router:{location:e,navigate:n,params:o}}))}}))(z)}}]);
//# sourceMappingURL=815.a4300321.chunk.js.map